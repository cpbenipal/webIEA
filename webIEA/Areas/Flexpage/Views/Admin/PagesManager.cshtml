@{
    ViewBag.Title = "Pages Manager";
}

<h2>@ViewBag.Title</h2>

<script type="text/javascript">

    function fp_pagesGrid_CustomButtonClick(s, e) {
        if (e.buttonID == 'btnPageDelete')
            fp_ConfirmDialog('Delete', 'Are you sure you want to delete this page?', function () { s.DeleteRow(e.visibleIndex); });
        else if (e.buttonID == 'btnPageEdit')
            fp_popupControlOpen({ command: 'edit', blockType: 'Page', blockID: s.GetRowKey(e.visibleIndex), alwaysCallOnClose: true }, function () { s.PerformCallback(); });
    }

    function fp_tinyUrl_CustomButtonClick(s, e) {
        if (e.buttonID == 'btnTinyUrlDelete')
            fp_ConfirmDialog('Delete', 'Are you sure you want to delete the url?', function () { s.DeleteRow(e.visibleIndex); });
        else if (e.buttonID == 'btnTinyUrlEdit')
            fp_popupControlOpen({ command: 'edit', blockType: 'TinyUrl', blockID: s.GetRowKey(e.visibleIndex), alwaysCallOnClose: true }, function () { s.PerformCallback(); });
    }

    function fp_afterAddPage() {
        fp_Pages_Grid.PerformCallback();
    }

    function fp_afterAddTinyUrl() {
        fp_TinyUrl_Grid.PerformCallback();
    }


</script>


<div class="flexpage records-field">

    <!--button-->
    <div class="row records-button">
        <div class="col-md-10">
            <h4 class="title-main-block">Pages</h4>
        </div>
        <div class="col-md-2">
            <div class="pull-right">
                <a data-toggle="modal" data-target="#pagesManager-add-new">
                    <button type="button" class="btn btn-orange" onclick="fp_popupControlOpen({ command:'add', blockType: 'Page' }, fp_afterAddPage)">
                        Add new page
                    </button>
                </a>
            </div>
        </div>
    </div>

    @Html.Partial("~/Areas/Flexpage/Views/Admin/PagesGrid.cshtml", new List<Flexpage.Abstract.DTO.PageModel>())
</div>

<br />
<br />

<div class="flexpage records-field">
    <!--button-->
    <div class="row records-button">
        <div class="col-md-10">
            <h4 class="title-main-block">Tiny URL</h4>
        </div>
        <div class="col-md-2">
            <div class="pull-right">
                <a data-toggle="modal" data-target="#tinyURL-add-new">
                    <button type="button" class="btn btn-orange" onclick="fp_popupControlOpen({ command: 'add', blockType: 'TinyUrl' }, fp_afterAddTinyUrl)">
                        Add new URL
                    </button>
                </a>
            </div>
        </div>
    </div>

    @Html.Partial("~/Areas/Flexpage/Views/Admin/TinyUrlGrid.cshtml", new List<Flexpage.Models.TinyUrlModel>())
</div>

