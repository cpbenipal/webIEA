@using DevExpress.DataProcessing
@model Flexpage.Models.SubscriptionTextModel

@{
    var cid = String.Format("fp_SubscriptionCollapse{0}", Model.Index);
}

<li class="ui-state-default" data-index="@Model.Index">
    @Html.HiddenFor(m => m.ID)
    @Html.HiddenFor(m => m.Index)
    @Html.HiddenFor(m => m.CmsTextID)
    @Html.HiddenFor(m => m.SubscriptionID)
    <div class="row">
        <div class="col-md-12">
            <div class="panel-group" style="margin-bottom: 4px">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" href="#@cid" class="align-box">@Model.DisplayName<span class="pull-right"><i class="fas fa-chevron-down rotate"></i></span></a>
                        </h4>
                    </div>
                </div>
            </div>
        </div>
        <div id="@cid" class="col-md-12 panel-collapse collapse collapse-field-container">
            <div class="col-md-12">
                <div class="row" style="margin-bottom: 6px">
                    <div class="col-md-1 fp_label">
                        Name
                    </div>
                    <div class="col-md-11">
                        @*@Html.TextBoxFor(m => m.Name, new { @class = "form-control" })*@
                        @{
                            var il = new List<SelectListItem>();

                            if (Model.NameMapping != null)
                            {
                                Model.NameMapping.ForEach(item =>
                                {
                                    il.Add(new SelectListItem()
                                    {
                                        Value = item.Key.ToString(),
                                        Text = item.Value,
                                        Selected = item.Key == Model.NotificationTypeId,
                                    });
                                });
                            }

                        }
                        @Html.DropDownListFor(m => m.NotificationTypeId, il, new { @class = "form-control" })
                    </div>
                </div>
                <div class="row" style="margin-bottom: 6px">
                    <div class="col-md-1 fp_label">
                        Subject
                    </div>
                    <div class="col-md-11">
                        @Html.EditorFor(m => m.CmsText.LocalizedTitle, "LocalizedString")
                    </div>
                </div>
                <div class="row" style="margin-bottom: 6px">
                    <div class="col-md-12">
                        @Html.EditorFor(m => m.CmsText.FullText, "_LocalizedText")
                    </div>
                </div>
            </div>
        </div>
    </div>
</li>
