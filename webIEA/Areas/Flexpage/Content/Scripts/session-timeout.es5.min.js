"use strict";function initSessionMonitor(){sess_lastActivity=new Date;setCookie();sessSetInterval();$(document).bind("keypress",function(n,t){sessKeyPressed(n,t)});$(document).bind("click",function(n,t){sessKeyPressed(n,t)})}function sessSetInterval(){sess_intervalID=setInterval("sessInterval()",sess_pollInterval)}function sessClearInterval(){clearInterval(sess_intervalID)}function sessKeyPressed(){setTimeout(function(){getLastActivityTime==!0&&(sess_lastActivity=new Date)},0)}function sessLogOut(){$.ajax({url:"/session/checkauth",type:"GET","async":!1,cache:!1,success:function(n){n=="True"?(sessKeyPressed(null,null),RestartSessionMonitor()):displayMessage("Warning: Your authentication has expired! The content displayed may be different and some functions are unavailable.")},error:function(){displayMessage("The server is not responding.")}})}function sessInterval(){var t=GetTimeDifference(),n;t>=actualCheckingValue&&(sessClearInterval(),countDownStartesFrom=global_sess_warningSeconds,n="Warning! Your session will expire in "+countDownStartesFrom+" seconds.",displayMessage(n),getLastActivityTime=!1,CountDownTimerID=setInterval("CountDown()",1e3),clearInterval(actualsess_intervalID))}function CancelLogout(){var n=GetTimeDifference();clearInterval(CountDownTimerID);n>global_sess_expirationSeconds?sessLogOut():RestartSessionMonitor()}function RestartSessionMonitor(){hideMessage();sessSetInterval();sess_lastActivity=new Date;getLastActivityTime=!0}function GetTimeDifference(){var n=getCookie(),t,i;return sess_lastActivity<n&&(sess_lastActivity=n),t=new Date-sess_lastActivity,i=t/1e3,i}function CountDown(){var n=getCookie(),t;n>sess_lastActivity?(sess_lastActivity=n,clearInterval(CountDownTimerID),hideMessage(),CancelLogout()):(countDownStartesFrom=countDownStartesFrom-1,countDownStartesFrom<=0?(clearInterval(CountDownTimerID),sessLogOut()):(t="Warning! Your session will expire in "+countDownStartesFrom+" seconds.",displayMessage(t)))}function awakeServerSession(){var n=getLastActivityTime;$.ajax({url:global_sess_resetPage,type:"POST",cache:!1,"async":!1});getLastActivityTime=n}function setCookie(){setInterval(function(){set_cookie("lastupdated",sess_lastActivity.toString(),86400,window.location.hostname)},2e3)}function getCookie(){if(get_cookie("loggedout")=="true")sessLogOut();else{var n=new Date(get_cookie("lastupdated"));if(!isNaN(n.getTime()))return n}}function deleteCookie(){delete_cookie("lastupdated",window.location.hostname)}function deleteSession(){set_cookie("loggedout","true",86400,window.location.hostname)}function msg(n,t){console.log(n+"- "+t.toString())}var actualsess_intervalID;$(document).ready(function(){isUserLoggedIn==!0&&(delete_cookie("loggedout",window.location.hostname),initSessionMonitor(),getLastActivityTime=!0)});var sess_pollInterval=1e4,sess_intervalID,CountDownTimerID,sess_lastActivity,actualCheckingValue=global_sess_expirationSeconds-global_sess_warningSeconds+global_sess_serverCheckDelaySeconds,getLastActivityTime,countDownStartesFrom=1;