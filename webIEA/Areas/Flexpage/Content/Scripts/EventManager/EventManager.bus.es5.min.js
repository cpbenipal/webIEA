"use strict";var EventManager=EventManager||{};EventManager.bus=function(){var n={},t=function(t,i){var r=this;return n[t]||(n[t]=[]),fp_settings.debug==!0,n[t].some(function(n){return n.callback===i&&n.context===r})||n[t].push({context:this,callback:i}),this},i=function(t){var u,i,f,r;if(!n[t])return!1;for(u=Array.prototype.slice.call(arguments,1),i=0,f=n[t].length;i<f;i++){r=n[t][i];try{fp_settings.debug==!0&&console.log("publish: "+t);r.callback.apply(r.context,u)}catch(e){EventManager.tools.FailedMessage("Event "+t+" error: "+e,n)}}return this};return{publish:i,subscribe:t,installTo:function(n){n.subscribe=t;n.publish=i}}}();